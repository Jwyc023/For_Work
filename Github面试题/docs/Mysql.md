# 索引

用于加速查询

## 索引优缺点

优点：

 1、极大地加速了索引过程，减少IO次数
 2、创建唯一索引，保证了数据库表中的唯一性
 3、加速了表与表之间的连接
 4、针对分组和排序检索时，能够显著减少查询查询中的分组和排序时间

缺点：

 1、索引表占据物理空间
 2、数据表中的数据增加、修改、删除的同时需要去动态维护索引表，降低了数据的维护速度

## 索引的分类

聚簇索引

非聚簇索引





## B+树

性质

1. I/O的次数取决于B+树的高度H，假设当前数据表的数据为N，每个磁盘块的数据项的数量是M，则有：H=log(M+1)N，当数据量N一定的情况下，M越大，H越小；而M=磁盘块大小/数据项大小，磁盘块大小也就是一个数据页的大小，是固定的，如果数据项占的空间越小，数据项的数量越多，树的高度也就越低。这也就是为什么每个数据项，即索引字段要尽量的小，比如int占4个字节，要比bigint的8个字节小一半。这也是为什么B+树要求把真实数据放在叶子节点内而不是内层节点内，一旦放到内层节点内，磁盘块的数据项会大幅度的下降，导致树层级的增高。当数据项为1时，B+树会退化成线性表。
   （简而言之，因为磁盘大小是固定的，所以数据项越小，一个磁盘项存储的数据量就越多。所以，如果真实数据不是在叶子节点而是在内部的话，磁盘项能存储的数据量会大大减少，会影响查询效率）
2. B+树的数据项是复合性数据结构，比如（name，age，gender）的时候，B+树是按照从左到右的顺序来建立搜索树的，比如当（小张，22，女）这样的数据来检索的时候，B+树会优先比较name来确定下一步的搜索方向，如果name相同再依次比较age和gender，最后得到检索的数据。但是，当（22，女）这样没有name的数据来的时候，B+树就不知道下一步该查哪个节点，因为建立搜索树的时候，name就是第一个比较因子，必须根据name来搜索才知道下一步去哪里查询。比如，当（小张，男）这样的数据来检索时，B+树就可以根据name来指定搜索方向，但下一字段age缺失，所以只能把名字是“小张”的所有数据都找到，然后再匹配性别是“男”的数据了。这个是非常重要的一条性质，即索引的最左匹配特性。
   （索引的结构从建立的时候就固定了？如果利用索引的特性去查询，只能依照这个结构顺序去写查询语句？）

最顶层常驻内存



